{
  "Name": "ICLR-Data-Processing-Cluster",
  "ReleaseLabel": "emr-6.15.0",
  "Applications": [
    {
      "Name": "Spark"
    },
    {
      "Name": "Hadoop"
    },
    {
      "Name": "Hive"
    },
    {
      "Name": "Pig"
    }
  ],
  "Instances": {
    "InstanceGroups": [
      {
        "Name": "Master node",
        "Market": "ON_DEMAND",
        "InstanceRole": "MASTER",
        "InstanceType": "m5.xlarge",
        "InstanceCount": 1,
        "EbsConfiguration": {
          "EbsBlockDeviceConfigs": [
            {
              "VolumeSpecification": {
                "VolumeType": "gp3",
                "SizeInGB": 100
              },
              "VolumesPerInstance": 1
            }
          ]
        }
      },
      {
        "Name": "Core nodes",
        "Market": "SPOT",
        "InstanceRole": "CORE",
        "InstanceType": "m5.2xlarge",
        "InstanceCount": 2,
        "EbsConfiguration": {
          "EbsBlockDeviceConfigs": [
            {
              "VolumeSpecification": {
                "VolumeType": "gp3",
                "SizeInGB": 200
              },
              "VolumesPerInstance": 1
            }
          ]
        }
      },
      {
        "Name": "Task nodes",
        "Market": "SPOT",
        "InstanceRole": "TASK",
        "InstanceType": "m5.2xlarge",
        "InstanceCount": 2,
        "EbsConfiguration": {
          "EbsBlockDeviceConfigs": [
            {
              "VolumeSpecification": {
                "VolumeType": "gp3",
                "SizeInGB": 200
              },
              "VolumesPerInstance": 1
            }
          ]
        }
      }
    ],
    "Ec2KeyName": "your-key-pair",
    "KeepJobFlowAliveWhenNoSteps": false,
    "TerminationProtected": false,
    "Ec2SubnetId": "subnet-xxxxxxxxx"
  },
  "BootstrapActions": [
    {
      "Name": "Install Python Dependencies",
      "ScriptBootstrapAction": {
        "Path": "s3://your-bucket/bootstrap/install-dependencies.sh"
      }
    }
  ],
  "Steps": [
    {
      "Name": "Data Validation",
      "ActionOnFailure": "CONTINUE",
      "HadoopJarStep": {
        "Jar": "command-runner.jar",
        "Args": [
          "spark-submit",
          "--deploy-mode", "cluster",
          "--master", "yarn",
          "--conf", "spark.driver.memory=4g",
          "--conf", "spark.executor.memory=8g",
          "--conf", "spark.executor.cores=4",
          "s3://your-bucket/scripts/data-validation.py"
        ]
      }
    },
    {
      "Name": "Performance Analysis",
      "ActionOnFailure": "CONTINUE",
      "HadoopJarStep": {
        "Jar": "command-runner.jar",
        "Args": [
          "spark-submit",
          "--deploy-mode", "cluster",
          "--master", "yarn",
          "--conf", "spark.driver.memory=4g",
          "--conf", "spark.executor.memory=8g",
          "--conf", "spark.executor.cores=4",
          "s3://your-bucket/scripts/performance-analysis.py"
        ]
      }
    }
  ],
  "JobFlowRole": "EMR_EC2_DefaultRole",
  "ServiceRole": "EMR_DefaultRole",
  "AutoScalingRole": "EMR_AutoScaling_DefaultRole",
  "VisibleToAllUsers": true,
  "Tags": [
    {
      "Key": "Project",
      "Value": "ICLR-Rating"
    },
    {
      "Key": "Environment",
      "Value": "Production"
    },
    {
      "Key": "Purpose",
      "Value": "Data-Processing"
    }
  ],
  "SecurityConfiguration": "your-security-config",
  "LogUri": "s3://your-bucket/emr-logs/",
  "Configurations": [
    {
      "Classification": "spark-defaults",
      "Properties": {
        "spark.driver.memory": "4g",
        "spark.executor.memory": "8g",
        "spark.executor.cores": "4",
        "spark.dynamicAllocation.enabled": "true",
        "spark.dynamicAllocation.minExecutors": "2",
        "spark.dynamicAllocation.maxExecutors": "10"
      }
    },
    {
      "Classification": "hive-site",
      "Properties": {
        "hive.metastore.warehouse.dir": "s3://your-bucket/hive-warehouse/"
      }
    }
  ]
} 